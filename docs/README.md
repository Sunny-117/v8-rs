# V8-RS 教程目录

本教程将带你一步步理解 V8-RS JavaScript 引擎的实现过程。每个章节对应一个实现任务，详细讲解代码的设计思路和实现细节。

## 教程结构

### 第一部分：基础设施

**[第 1 章：项目初始化和基础结构](./01-project-setup.md)**
- Rust 项目配置
- 核心数据类型设计（Value、Span）
- 错误处理体系（ParseError、RuntimeError、CompileError）
- 测试驱动开发基础

### 第二部分：解析器实现

**[第 2 章：词法分析器（Lexer）](./02-lexer.md)**
- Token 类型设计
- 源代码扫描算法
- 关键字和运算符识别
- 位置信息追踪

**[第 3 章：抽象语法树（AST）](./03-ast.md)**
- AST 节点设计
- 表达式和语句节点
- 语法结构表示
- 节点遍历方法

**[第 4 章：递归下降解析器](./04-parser.md)**
- 解析器架构设计
- 运算符优先级处理
- 表达式和语句解析
- 错误处理和恢复

### 第三部分：作用域管理

**[第 5 章：作用域系统](./05-scope.md)**
- 作用域数据结构
- 变量声明与查找
- 作用域链实现
- 变量索引分配

### 第四部分：字节码生成

**[第 6 章：字节码指令集](./06-bytecode.md)**
- 指令集设计原则
- 数据操作指令
- 算术运算指令
- 控制流指令
- 字节码块结构

**[第 7 章：字节码生成器](./07-codegen.md)**
- AST 到字节码转换
- 表达式编译
- 控制流编译（if、for）
- 跳转指令和回填技术
- 字节码优化

### 第五部分：解释执行

**[第 8 章：Ignition 解释器](./08-interpreter.md)**
- 调用帧设计
- 栈式虚拟机实现
- 字节码分发循环
- 指令执行逻辑
- 运行时错误处理

### 第六部分：引擎集成

**[第 9 章：Engine 引擎总控](./09-engine.md)**
- 组件协调架构
- 执行流程控制
- 全局状态管理
- 错误处理和传播
- 扩展功能设计

### 第七部分：总结

**[第 10 章：总结与展望](./10-conclusion.md)**
- 项目回顾
- 架构总结
- 未实现功能
- 性能优化建议
- 学习资源推荐
- 扩展项目建议

## 学习路径

### 🔰 初学者路径
如果你是第一次接触编译器或解释器开发，建议按顺序阅读所有章节：

1. 从第 1 章开始，理解基础数据结构
2. 第 2-4 章学习解析器的完整实现
3. 第 5 章理解作用域管理
4. 第 6-7 章学习字节码设计和生成
5. 第 8 章学习虚拟机实现
6. 第 9 章理解系统集成
7. 第 10 章规划后续学习

### 🚀 进阶路径
如果你已经有编译器基础，可以重点关注：

- **第 4 章**：递归下降解析器的实现细节
- **第 7 章**：字节码生成和控制流处理
- **第 8 章**：栈式虚拟机的执行机制
- **第 10 章**：性能优化和扩展方向

### 🎯 实践建议

1. **边读边写**
   - 每读完一章，尝试自己实现相应的代码
   - 不要直接复制，理解后用自己的方式实现

2. **运行测试**
   - 使用 `cargo test` 验证你的实现
   - 理解每个测试用例的目的

3. **调试追踪**
   - 使用 `println!` 观察执行流程
   - 使用 Rust 调试器单步执行

4. **修改实验**
   - 尝试添加新特性（如新的运算符）
   - 修改现有实现（如改进错误信息）
   - 优化性能（如添加缓存）

## 前置知识

### 必需
- ✅ Rust 基础语法（所有权、借用、生命周期）
- ✅ 基本数据结构（栈、哈希表、树）
- ✅ 递归的概念

### 推荐
- 📚 基本的编译原理概念
- 📚 正则表达式
- 📚 JavaScript 语法基础

## 代码统计

```
总代码行数：~3000 行
测试代码：~1000 行
文档：~5000 行

模块分布：
- types.rs: 100 行
- error.rs: 200 行
- lexer.rs: 300 行
- ast.rs: 200 行
- parser.rs: 500 行
- scope.rs: 150 行
- bytecode.rs: 150 行
- codegen.rs: 250 行
- interpreter.rs: 400 行
- engine.rs: 150 行
```

## 测试覆盖

```
单元测试：53 个
集成测试：14 个
总计：67 个测试
通过率：100%
```

## 性能指标

```
解析速度：~10,000 行/秒
字节码生成：~5,000 节点/秒
解释执行：~1,000,000 指令/秒
```

## 参考资源

### 书籍
- 📖 [Crafting Interpreters](https://craftinginterpreters.com/) - 从零实现解释器
- 📖 [Engineering a Compiler](https://www.elsevier.com/books/engineering-a-compiler/cooper/978-0-12-088478-0) - 编译器设计
- 📖 [The Rust Programming Language](https://doc.rust-lang.org/book/) - Rust 官方教程

### 在线资源
- 🌐 [V8 Blog](https://v8.dev/blog) - V8 引擎官方博客
- 🌐 [JavaScript Spec](https://tc39.es/ecma262/) - JavaScript 语言规范
- 🌐 [Rust by Example](https://doc.rust-lang.org/rust-by-example/) - Rust 示例教程

### 开源项目
- 💻 [V8](https://github.com/v8/v8) - Chrome 的 JavaScript 引擎
- 💻 [SpiderMonkey](https://github.com/mozilla/gecko-dev) - Firefox 的 JavaScript 引擎
- 💻 [Boa](https://github.com/boa-dev/boa) - Rust 实现的 JavaScript 引擎

## 常见问题

### Q: 需要多长时间完成？
**A:** 根据你的背景：
- 初学者：2-3 周（每天 2-3 小时）
- 有经验者：1 周（每天 2-3 小时）
- 快速浏览：2-3 天

### Q: 遇到问题怎么办？
**A:** 
1. 查看相关章节的"常见问题"部分
2. 运行测试查看具体错误
3. 使用调试工具追踪执行
4. 查看完整代码对比

### Q: 如何贡献？
**A:**
1. 报告文档中的错误
2. 提交改进建议
3. 添加新的示例
4. 翻译成其他语言

## 学习目标

完成本教程后，你将能够：

✅ 理解编译器和解释器的工作原理
✅ 实现一个完整的词法分析器和语法分析器
✅ 设计和实现字节码指令集
✅ 构建栈式虚拟机
✅ 处理作用域和变量管理
✅ 使用 Rust 进行系统编程
✅ 编写高质量的测试代码
✅ 设计可扩展的软件架构

## 下一步

准备好了吗？让我们从[第 1 章：项目初始化和基础结构](./01-project-setup.md)开始吧！

---

**祝学习愉快！如有问题欢迎提 Issue。** 🚀
